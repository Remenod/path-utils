#!/bin/bash

# Help
if [ "$1" = "--help" ] || [ "$1" = "-h" ] || [ -z "$1" ]; then
    echo ""
    echo "Usage: pathdel <directory>"
    echo ""
    echo "Deletes the directory from PATH and ~/.bashrc"
    echo ""
    echo "Options:"
    echo "  -h, --help     Show this help message"
    return 0 2>/dev/null || exit 0
fi

DIR="$(realpath "$1")"
BASHRC="$HOME/.bashrc"

if grep -Fq "$DIR" "$BASHRC"; then
    grep -Fv "$DIR" "$BASHRC" > "$BASHRC.tmp" && mv "$BASHRC.tmp" "$BASHRC"
    echo "Removed from .bashrc: $DIR"
else
    echo "No such PATH entry in .bashrc: $DIR"
fi

PATH=$(echo "$PATH" | tr ':' '\n' | grep -v -F "$DIR" | paste -sd ':' -)
export PATH="$PATH"

echo "Removed from current session PATH: $DIR"

