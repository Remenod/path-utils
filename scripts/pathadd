#!/bin/bash

# Help
if [ "$1" = "--help" ] || [ "$1" = "-h" ] || [ -z "$1" ]; then
    echo ""
    echo "Usage: pathadd <directory>"
    echo ""
    echo "Adds the directory to PATH and appends it to ~/.bashrc"
    echo ""
    echo "Options:"
    echo "  -h, --help     Show this help message"
    return 0 2>/dev/null || exit 0
fi

DIR="$(realpath "$1")"
BASHRC="$HOME/.bashrc"

if echo "$PATH" | tr ':' '\n' | grep -Fxq "$DIR"; then
    echo "$DIR is already in PATH"
    return 0 2>/dev/null || exit 0
fi

echo "export PATH=\"\$PATH:$DIR\"" >> "$BASHRC"
export PATH="$PATH:$DIR"

echo "Added to PATH and .bashrc: $DIR"
